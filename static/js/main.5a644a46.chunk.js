(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{155:function(e,t){},231:function(e,t,n){},233:function(e,t,n){},261:function(e,t){},263:function(e,t){},273:function(e,t){},275:function(e,t){},302:function(e,t){},304:function(e,t){},305:function(e,t){},311:function(e,t){},313:function(e,t){},331:function(e,t){},333:function(e,t){},345:function(e,t){},348:function(e,t){},380:function(e,t,n){"use strict";n.r(t);var r=n(13),s=(n(231),n(38)),c=n(12),a=n(0),i=n.n(a),o=n(42),u=n(25),l=(n(233),n(1)),d=n.n(l),j=n(423),f=n(421),p=n(217),b=n.n(p),m=n(28),h=n(424),O=d.a.createContext({getProfileFB:function(){return Promise.resolve({isSuccessful:!1})},setProfileFB:function(){return Promise.resolve({isSuccessful:!1})},getAllProfilesFB:function(){return Promise.resolve({isSuccessful:!1})}}),x="https://network2-backend.herokuapp.com",v=function(e){var t=e.children,n=Object(l.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x+"/users/profile/".concat(t),{method:"GET"});case 2:if(!(n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),s=Object(l.useCallback)(function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x+"/users/profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t})});case 2:if(!(n=e.sent).ok){e.next=5;break}return e.abrupt("return",{isSuccessful:!0});case 5:return e.abrupt("return",{isSuccessful:!1,message:n.statusText});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),c=Object(l.useCallback)(Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x+"/users/allProfiles",{method:"GET"});case 2:if(!(t=e.sent).ok){e.next=7;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)}))),[]);return Object(r.jsx)(O.Provider,{value:{getProfileFB:n,setProfileFB:s,getAllProfilesFB:c},children:t})},y=n(107),k=(n(378),n(220)),g="localhost"===window.location.hostname?"ws://localhost:8000":"wss://network2-backend.herokuapp.com",w=b()(g,{transports:["websocket"]}),S=new m.i({name:"Beacon Docs"}),A=Object(h.a)();var P=function(){var e=Object(l.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],p=Object(l.useState)("sync"),b=Object(u.a)(p,2),m=b[0],h=b[1],x=Object(l.useState)(!1),v=Object(u.a)(x,2),g=v[0],P=v[1],F=Object(l.useState)(),C=Object(u.a)(F,2),z=C[0],T=C[1],B=Object(l.useContext)(O),N=B.getProfileFB,R=B.setProfileFB,E=B.getAllProfilesFB,L=Object(l.useState)({emoji:z,timestamp:Date.now(),key:A,username:""}),D=Object(u.a)(L,2),q=D[0],I=D[1],G=Object(l.useState)([{emoji:"blue",timestamp:Date.now(),key:A,username:"user x"}]),J=Object(u.a)(G,2),U=J[0],X=J[1],H=d.a.useState("Anon"),K=Object(u.a)(H,2),_=K[0],M=K[1],Q=Object(y.b)().enqueueSnackbar,V=Object(l.useState)([]),W=Object(u.a)(V,2),Y=W[0],Z=W[1];function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tezos.domains/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:'\n            {\n              reverseRecord(address: "'+t+'"){owner domain{name}}\n            }\n            ',variables:{}})}).then((function(e){return e.json()})).then((function(e){e.data.reverseRecord&&(n=e.data.reverseRecord.domain.name,h(n),I(Object(s.a)(Object(s.a)({},q),{},{username:n})))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),n&&S.clearActiveAccount().then(Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S.getActiveAccount();case 3:e.t1=e.sent,(0,e.t0)(e.t1),h("sync"),P(!1);case 7:case"end":return e.stop()}}),e)}))));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return re.apply(this,arguments)}function re(){return(re=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=12;break}return h(n.address),P(!0),$(n.address),e.abrupt("return",n);case 12:return e.prev=12,console.log("Requesting permissions..."),e.next=16,S.requestPermissions();case 16:return t=e.sent,e.t2=a,e.next=20,S.getActiveAccount();case 20:e.t3=e.sent,(0,e.t2)(e.t3),console.log("Got permissions:",t.address),h(t.address),P(!0),$(t.address),e.next=31;break;case 28:e.prev=28,e.t4=e.catch(12),console.log("Got error:",e.t4);case 31:case"end":return e.stop()}}),e,null,[[12,28]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:t=e.sent,X(t.recentStatus),Z(t.history);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){var e=function(e){Z(Y.concat(e).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),U.find((function(t,n){return t.key===e.key&&(X([].concat(Object(c.a)(U.slice(0,n)),[e],Object(c.a)(U.slice(n+1)))),!0)}))};return w.on("profile",e),function(){w.off("profile",e)}}),[U,X]),Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a,e.next=3,S.getActiveAccount();case 3:if(e.t1=e.sent,(0,e.t0)(e.t1),!n){e.next=16;break}return h(n.address.slice(0,6)+"..."+n.address.slice(32,36)),P(!0),$(n.address),e.next=11,N(n.address);case 11:t=e.sent,I(t),M(t.username),e.next=18;break;case 16:h("sync"),P(!1);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"top-left",style:{fontSize:"1em",display:"flex",alignItems:"center",margin:10},children:Object(r.jsx)("b",{children:"Network 2 \ud83d\udce0"})}),Object(r.jsx)("div",{style:{fontSize:"0.9em",marginTop:13,marginLeft:13},children:Object(r.jsx)("b",{children:"History"})}),Object(r.jsx)("div",{style:{display:"flex",width:"90%",marginLeft:"auto",marginRight:"auto",overflowX:"scroll"},children:Y&&Y.map((function(e){return Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:100,height:30,border:"solid 4px ",margin:4},children:Object(r.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:e.emoji})}),Object(r.jsxs)(j.a,{title:e.key,size:"small",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(e.key),Q("Address copied ! "+e.key,{variant:"success"});case 2:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.key)}))}),Object(r.jsx)("div",{style:{fontSize:"0.9em",marginTop:6,marginLeft:13},children:Object(r.jsx)("b",{children:"Recent Status"})}),Object(r.jsxs)("div",{style:{display:"flex",width:"90%",marginLeft:"auto",marginRight:"auto",overflowX:"scroll"},children:[Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:100,height:30,border:"solid 4px ",margin:4},children:Object(r.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:q.emoji})}),Object(r.jsxs)(j.a,{title:q.key,size:"small",onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.clipboard.writeText(q.key),Q("Address copied ! "+q.key,{variant:"success"});case 2:case"end":return e.stop()}}),e)}))),children:[q.username," "]})]}),U&&U.map((function(e){return(!n||e.key!==n.address)&&Object(r.jsxs)("div",{style:{textAlign:"center",margin:6},children:[Object(r.jsx)("div",{style:{width:100,height:30,border:"solid 4px ",margin:4},children:Object(r.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:e.emoji})}),Object(r.jsxs)(j.a,{title:e.key,size:"small",onClick:Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.clipboard.writeText(e.key),Q("Address copied ! "+e.key,{variant:"success"});case 2:case"end":return t.stop()}}),t)}))),children:[e.username," "]})]},e.key)}))]}),Object(r.jsxs)("div",{style:{width:"90%",marginLeft:"auto",marginRight:"auto"},children:[Object(r.jsx)(k.a,{title:"Pick your emoji",emoji:"point_up",onSelect:function(e){console.log(e),T(e.native)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(f.a,{id:"outlined-basic",label:"info",variant:"outlined",placeholder:"Status",onChange:function(e){e.target.value.length<25?M(e.target.value):M(e.target.value.slice(0,25))},value:_,onKeyPress:function(e){if("Enter"===e.key)if(n){var t=Date.now();I(Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:t})),w.emit("profile",Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:t})),R(Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:t})),Z(Y.concat([Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:t})]).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),Q("Status Updated ! ",{variant:"success"}),M("")}else ne()}}),Object(r.jsx)("div",{style:{width:50,height:30,border:"solid 4px ",margin:4},children:Object(r.jsx)("div",{style:{textAlign:"center",fontSize:"1.4em"},children:z})}),Object(r.jsxs)(j.a,{size:"small",title:"update status",onClick:function(){if(n){var e=Date.now();I(Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:e})),w.emit("profile",Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:e})),R(Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:e})),Z(Y.concat([Object(s.a)(Object(s.a)({},q),{},{emoji:z,key:n.address,username:_,timestamp:e})]).sort((function(e,t){return parseFloat(t.timestamp)-parseFloat(e.timestamp)}))),Q("Status Updated ! ",{variant:"success"})}else ne()},children:["  ",n?Object(r.jsx)("u",{children:"update status"}):Object(r.jsx)("u",{children:"sync to join network1"})," "]})]})]}),Object(r.jsx)("div",{className:"bottom-left",style:{position:"absolute"},children:Object(r.jsxs)(j.a,{title:"Adventure Networks",size:"small",onClick:function(){},children:["  ",Object(r.jsxs)("div",{style:{textAlign:"left"},children:[" Adventure ",Object(r.jsx)("br",{}),"Networks "]})," "]})}),Object(r.jsxs)("div",{className:"bottom-right",style:{position:"absolute",display:"flex",alignItems:"center"},children:[g&&Object(r.jsxs)(j.a,{size:"small",title:"unsync",onClick:function(){!function(){te.apply(this,arguments)}()},children:[Object(r.jsx)("u",{children:"unsync"})," "]}),g&&Object(r.jsx)("div",{children:" | "}),Object(r.jsxs)(j.a,{title:"sync",size:"small",onClick:Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:case"end":return e.stop()}}),e)}))),children:[Object(r.jsx)("u",{children:m})," "]})]})]})},F=n(24),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,425)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};n.n(F).a.render(Object(r.jsx)(v,{children:Object(r.jsx)(y.a,{maxSnack:3,children:Object(r.jsx)(P,{})})}),document.getElementById("root")),C()}},[[380,1,2]]]);
//# sourceMappingURL=main.5a644a46.chunk.js.map